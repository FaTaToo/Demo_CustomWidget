<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>Tutorial: Hello Dojo!</title>
    <script>
        // Instead of using data-dojo-config, we're creating a dojoConfig
        // object *before* we load dojo.js; they're functionally identical,
        // it's just easier to read this approach with a larger configuration.
        var dojoConfig = {
            async: true,
            baseUrl: '.',
            packages: [
                'dojo',
                'dijit',
                'dojox',
                {
                    name: 'myApp',
                    location: location.pathname.replace(/\/[^/]+$/, '') + '/myApp'
                },
            ],            
        };
    </script>
    <!-- load Dojo -->
    <script src="dojo/dojo.js"></script>

    <script>
        require([
            "dojo/request", 
            "dojo/dom", 
            "dojo/_base/array",
            "myApp/widget/AuthorWidget",
            "dojo/domReady!"
        ],  function(request, dom, arrayUtil, AuthorWidget){
            // Load up our authors
            //cannot run, because of cannot run on local.
            // request("myApp/data/authors.json", {
            //     handleAs: "json"
            // }).then(function(authors){
            //     // Get a reference to our container
            //     console.log(222);
            //     var authorContainer = dom.byId("authorContainer");

            //     arrayUtil.forEach(authors, function(author){
            //         // Create our widget and place it
            //         var widget = new AuthorWidget(author).placeAt(authorContainer);
            //     });
            // });

            //fake
            authors = [
                {
                    "name": "Brian Arnold",
                    "avatar": "myApp/widget/images/defaultAvatar.png",
                    "bio": "Brian Arnold is a software engineer at SitePen, Inc., ..."
                },
            ]
            var authorContainer = dom.byId("authorContainer");
            arrayUtil.forEach(authors, function(author){
                // Create our widget and place it
                var widget = new AuthorWidget(author, authorContainer);
                // var widget = new AuthorWidget(author).placeAt(authorContainer);
            });
        });
    </script>
</head>
<body>
    <h1 id="authorContainer">Hello</h1>
    <!-- configure Dojo -->
    
</body>
</html>